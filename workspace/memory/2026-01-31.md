# 2026-01-31 - Session Notes

## Major Work Done

### Volvox Discord Moderation Bot
- Built config system for volvox-mod-bot (`/home/bill/.openclaw/workspace/volvox-mod-bot`)
- Config at `config.json` with feature toggles, action flags, ignore lists, custom patterns
- Mod roles to ping: Leadership (1438642374090821653), Support (1438648304295739593), Friend (1465750364090536009)
- Alert channel: #notifications (1438665401243275284)
- Bot was running standalone but later integrated into OpenClaw as multi-agent

### Multi-Agent OpenClaw Setup (Pip + Volvox Bot)
- Set up Volvox Bot as separate OpenClaw agent with its own workspace (`/home/bill/.openclaw/workspace-volvox`)
- Discord accounts: `pip` (me) and `volvox` (Volvox Bot)
- Bindings route each Discord account to its agent
- Volvox Bot uses Claude Haiku 4.5 model
- **CURRENTLY DISABLED** - Bill turned it off due to responding too much and eating tokens

### Volvox Bot Configuration (for when re-enabled)
- Workspace has SOUL.md with:
  - Extremely snarky, sarcastic, witty personality
  - Selective response rules (don't respond to everything)
  - Welcome template for new members (include member number, celebrate milestones)
  - Anti-spam welcome rules (no back-to-back welcomes)
  - Bot loop prevention (ignore Pip)
  - Moderation duties (spam detection patterns)
- User memory at `memory/users.md`

### Config Crashes & Recovery
- Tailscale serve mode caused gateway crashes
- Had to reinstall gateway, config got nuked
- Restored config piece by piece
- Lesson: Don't mess with Tailscale serve without backup plan

## Current State
- Gateway running on tailnet bind
- Tailscale serve proxying to `https://bill.tail8b4599.ts.net/`
- Token: `3befa8b3a1fa750afacde0e77b4f5300fc8f472253ca0440`
- Pip (me): active on Discord
- Volvox Bot: DISABLED (can re-enable by setting `channels.discord.accounts.volvox.enabled: true`)

## Volvox Discord Info
- Guild ID: 1438631180474781909
- Key channels:
  - general: 1438631182379253814
  - introductions: 1446317676988465242
  - notifications: 1438665401243275284
  - ai-discussion: 1438716766225301535
  - programming-help: 1466496141142261922

## Evening Session - Config Rebuild

### What Happened
- Previous config patches crashed the gateway (something about Tailscale serve mode)
- Gateway got reinstalled/reset, config wiped to defaults
- Rebuilt config incrementally:
  1. Added `volvox` agent to agents.list
  2. Next: Discord accounts, bindings, etc.

### Config Rebuild Progress
- [x] Gateway running with fresh config
- [x] Added volvox agent (workspace-volvox, haiku-4-5)
- [ ] Discord accounts (pip + volvox)
- [ ] Channel bindings
- [ ] Tailnet bind mode
- [ ] Full verification

### Lesson Learned
Apply config changes ONE AT A TIME when rebuilding. Bulk changes can crash gateway.

### Key IDs to Remember
- Pip Bot: 1466213865397162150
- Volvox Bot: 1467236664853139477
- Bill Discord: 191633014441115648 (only one who can authorize dangerous commands)

## Late Night Session - Volvox Bot Selectivity Improvements

### Security Hardening (COMPLETED)
- Changed `groupPolicy` from `"open"` to `"allowlist"`
- Gateway now locked to Tailscale
- Task tracked in Kanban: 8 min tracked

### Volvox Bot Response Rules Overhaul
Updated `/home/bill/.openclaw/workspace-volvox/SOUL.md` multiple times:

**First pass:**
- Added DM restriction: only Bill can DM the bot
- Stricter speaking rules in SOUL.md (default SILENCE, 4 explicit triggers only)
- Added self-check checklist before every response
- Gateway config: `requireMention: true` for all channels EXCEPT #introductions and #programming-help

**Second pass (latest):**
- Made #programming-help fully proactive ("always help" mode on ANY coding question)
- Added "Technical questions you can answer" as trigger for other channels
- Changed rigid "90/10 Rule" to context-aware "Helper Rule"
- Bot should now be helpful but selective - proactive in help channels, quiet elsewhere

### Claude Code Usage Monitoring (DEFERRED)
- Discovered OAuth endpoint: `https://api.anthropic.com/api/oauth/usage`
- Requires `user:profile` scope, Bill's token only has `user:inference`
- Installed `ccusage` globally via npm
- Updated evening digest to include usage report
- Bill needs to re-login: `claude logout && claude login` with `user:profile` scope
- Created task for follow-up: `task_20260201_FBxTrg`

### Blocked Items
- `cmonitor` Python tool - can't install without sudo for python3-venv
- Claude usage API - waiting on Bill's OAuth re-login

### Config Reference
- Config path: `/home/bill/.openclaw/openclaw.json`
- Volvox workspace: `/home/bill/.openclaw/workspace-volvox/`
- #programming-help channel ID: `1466496141142261922`
- Dashboard: `http://bills-1:18789/?token=3befa8b3a1fa750afacde0e77b4f5300fc8f472253ca0440`

## Late Night - Discord Volvox Bot Project Created
**Location:** /home/bill/.openclaw/workspace/discord-volvox-bot
**Tech Stack:** Discord.js (Node.js)
**Files Created:**
- index.js — Main bot logic with Discord.js library
- .env — Bot token and environment config
- .env.example — Template file
- package.json — Project configuration
- SKILL.md — Skill documentation

**Features:**
- Auto-welcome new members in #introductions (with random messages)
- Spam/scam detection (crypto, nitro phishing, etc.)
- Proactive help in #programming-help (no @mention needed)
- Mod alerts to #notifications (@bapes ping on detection)
- Rate-limited fallback (GLM 4.7) — Built-in safety mechanism
- Veritas Kanban integration — Creates tasks via Kanban API for bot dev work

**Deployment:**
Bot is ready to deploy once Discord token is configured in .env
Run: cd /home/bill/.openclaw/workspace/discord-volvox-bot && npm install && cp .env.example .env && npm run test

**Note:** This is a replacement for the previous standalone volvox-mod-bot approach. This new bot uses Discord.js library, integrates with Veritas Kanban, and can be loaded as an OpenClaw skill (auto-restart gateway when deployed).
